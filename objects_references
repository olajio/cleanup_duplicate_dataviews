{
  "id": "71b6abda-dd07-497f-a87c-1b72fd0ec553",
  "type": "search",
  "namespaces": [
    "test_space_ola"
  ],
  "migrationVersion": {
    "search": "10.4.0"
  },
  "originId": "94aa2998-800f-47cd-a391-1103aebcf00b",
  "updated_at": "2025-03-11T15:15:40.092Z",
  "created_at": "2025-03-11T15:15:40.092Z",
  "created_by": "u_L1yAPITrWPW-zqTinBdcm9IG1wKdaijMl9zIE5q8FtM_0",
  "updated_by": "u_L1yAPITrWPW-zqTinBdcm9IG1wKdaijMl9zIE5q8FtM_0",
  "version": "WzgyNTg5LDM0XQ==",
  "attributes": {
    "breakdownField": "cloud.region",
    "columns": [
      "cloud.region",
      "kubernetes.container.name",
      "kubernetes.namespace",
      "kubernetes.pod.name",
      "log.level",
      "error.type"
    ],
    "description": "",
    "grid": {
      "columns": {
        "cloud.region": {
          "width": 168
        },
        "involvedObject.name": {
          "width": 383
        },
        "level": {
          "width": 101
        }
      }
    },
    "hideChart": false,
    "isTextBasedQuery": false,
    "kibanaSavedObjectMeta": {
      "searchSourceJSON": """{"query":{"query":"","language":"kuery"},"filter":[{"meta":{"disabled":false,"negate":false,"alias":null,"key":"kubernetes.namespace","field":"kubernetes.namespace","value":"exists","type":"exists","indexRefName":"kibanaSavedObjectMeta.searchSourceJSON.filter[0].meta.index"},"query":{"exists":{"field":"kubernetes.namespace"}},"$state":{"store":"appState"}},{"meta":{"disabled":false,"negate":false,"alias":null,"key":"log.level","field":"log.level","params":{"query":"CRITICAL"},"type":"phrase","indexRefName":"kibanaSavedObjectMeta.searchSourceJSON.filter[1].meta.index"},"query":{"match_phrase":{"log.level":"CRITICAL"}},"$state":{"store":"appState"}}],"indexRefName":"kibanaSavedObjectMeta.searchSourceJSON.index"}"""
    },
    "refreshInterval": {
      "pause": true,
      "value": 60000
    },
    "sort": [
      [
        "@timestamp",
        "desc"
      ]
    ],
    "timeRange": {
      "from": "now-24h/h",
      "to": "now"
    },
    "timeRestore": true,
    "title": "Verify ⁠52001 - Critical Log level",
    "usesAdHocDataView": false
  },
  "references": [
    {
      "id": "d1e912b0-958c-4307-ae6e-9d9da63b00ea",
      "name": "kibanaSavedObjectMeta.searchSourceJSON.index",
      "type": "index-pattern"
    },
    {
      "id": "d1e912b0-958c-4307-ae6e-9d9da63b00ea",
      "name": "kibanaSavedObjectMeta.searchSourceJSON.filter[0].meta.index",
      "type": "index-pattern"
    },
    {
      "id": "d1e912b0-958c-4307-ae6e-9d9da63b00ea",
      "name": "kibanaSavedObjectMeta.searchSourceJSON.filter[1].meta.index",
      "type": "index-pattern"
    },
    {
      "id": "ed4e4533-7b34-48e9-829f-43ac6bc41b1f",
      "name": "tag-ref-default_MT",
      "type": "tag"
    }
  ],
  "managed": false,
  "coreMigrationVersion": "8.8.0",
  "typeMigrationVersion": "10.4.0"
}

{
  "id": "71b6abda-dd07-497f-a87c-1b72fd0ec553",
  "type": "search",
  "namespaces": [
    "test_space_ola"
  ],
  "migrationVersion": {
    "search": "10.4.0"
  },
  "originId": "94aa2998-800f-47cd-a391-1103aebcf00b",
  "updated_at": "2025-03-11T15:15:40.092Z",
  "created_at": "2025-03-11T15:15:40.092Z",
  "created_by": "u_L1yAPITrWPW-zqTinBdcm9IG1wKdaijMl9zIE5q8FtM_0",
  "updated_by": "u_L1yAPITrWPW-zqTinBdcm9IG1wKdaijMl9zIE5q8FtM_0",
  "version": "WzgyNTg5LDM0XQ==",
  "attributes": {
    "breakdownField": "cloud.region",
    "columns": [
      "cloud.region",
      "kubernetes.container.name",
      "kubernetes.namespace",
      "kubernetes.pod.name",
      "log.level",
      "error.type"
    ],
    "description": "",
    "grid": {
      "columns": {
        "cloud.region": {
          "width": 168
        },
        "involvedObject.name": {
          "width": 383
        },
        "level": {
          "width": 101
        }
      }
    },
    "hideChart": false,
    "isTextBasedQuery": false,
    "kibanaSavedObjectMeta": {
      "searchSourceJSON": """{"query":{"query":"","language":"kuery"},"filter":[{"meta":{"disabled":false,"negate":false,"alias":null,"key":"kubernetes.namespace","field":"kubernetes.namespace","value":"exists","type":"exists","indexRefName":"kibanaSavedObjectMeta.searchSourceJSON.filter[0].meta.index"},"query":{"exists":{"field":"kubernetes.namespace"}},"$state":{"store":"appState"}},{"meta":{"disabled":false,"negate":false,"alias":null,"key":"log.level","field":"log.level","params":{"query":"CRITICAL"},"type":"phrase","indexRefName":"kibanaSavedObjectMeta.searchSourceJSON.filter[1].meta.index"},"query":{"match_phrase":{"log.level":"CRITICAL"}},"$state":{"store":"appState"}}],"indexRefName":"kibanaSavedObjectMeta.searchSourceJSON.index"}"""
    },
    "refreshInterval": {
      "pause": true,
      "value": 60000
    },
    "sort": [
      [
        "@timestamp",
        "desc"
      ]
    ],
    "timeRange": {
      "from": "now-24h/h",
      "to": "now"
    },
    "timeRestore": true,
    "title": "Verify ⁠52001 - Critical Log level",
    "usesAdHocDataView": false
  },
  "references": [
    {
      "id": "d1e912b0-958c-4307-ae6e-9d9da63b00ea",
      "name": "kibanaSavedObjectMeta.searchSourceJSON.index",
      "type": "index-pattern"
    },
    {
      "id": "d1e912b0-958c-4307-ae6e-9d9da63b00ea",
      "name": "kibanaSavedObjectMeta.searchSourceJSON.filter[0].meta.index",
      "type": "index-pattern"
    },
    {
      "id": "d1e912b0-958c-4307-ae6e-9d9da63b00ea",
      "name": "kibanaSavedObjectMeta.searchSourceJSON.filter[1].meta.index",
      "type": "index-pattern"
    },
    {
      "id": "ed4e4533-7b34-48e9-829f-43ac6bc41b1f",
      "name": "tag-ref-default_MT",
      "type": "tag"
    }
  ],
  "managed": false,
  "coreMigrationVersion": "8.8.0",
  "typeMigrationVersion": "10.4.0"
}


build two conditions:
  check if reference need to be updated, and save it to a list instead of updating it in elastic
  if the reference doesn't need to be updated, save it tonthe same list
  the list now conayins the reference that doesn;t need to be updated as well as the once that ned to be updated.
  the m,ake one api call to elastic to update the object with the new payload, with the complate list of references
